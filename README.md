# do_sysbench

sysbenchでベンチマークを採るバッチです。

## 使い方

1. DBを用意します。sysbenchはMySQLとPostgreSQLに対応していますが、このスクリプトはMySQLを前提にしています
1. ベンチサーバを用意します。
1. ベンチサーバからDBへアクセスできるように設定します。
1. test_condを書き換えて、環境に合わせます。
	1. DBHOST 対象DBサーバのIPアドレスで書き換えます
	1. DBNAME データベース名。よければこのままでも
	1. DBUSER ユーザ名。よければこのままでも
	1. DBPASS DBUSERのパスワード。現状は$HOME/.my.cnfからCUTしてきています
	1. MAX_TIME 1度のテストの継続時間（秒）。お好きな時間に変更してください
	1. NUM_TABLES テーブル数。お好きな数に
	1. TABLE_SIZE テーブルあたりのサイズ。お好きな数に
1. ./sb_prepareを実行します。DBNAMEをDROPして初期化するので注意してください。テーブル数とサイズにより実行時間が長くかかります。
1. ./sb_runを実行します。時刻に応じたディレクトリにログファイルを残します。スレッド数を調整したいときはforループを変更してください。
